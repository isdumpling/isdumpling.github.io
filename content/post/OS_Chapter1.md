---
title: 操作系统（王道）第一章：计算机系统概述
author: 一只饺子
tags:
  - "408"
categories: "408"
typora-root-url: ./..\..\static
image: post/img/11.jpg
---

## 1 操作系统的基本概念

### 1.1 操作系统的基本概念



<mark>操作系统</mark>是指<mark>控制和管理</mark>整个计算机系统的<mark>硬件与软件资源</mark>，合理地组织、调度计算机的工作与资源的分配，进而为用户和其他软件<mark>提供方便接口与环境</mark>的程序集合。操作系统是计算机系统中最基本的系统软件



![计算机系统的层次结构](/img/计算机系统的层次结构.png)



### 1.2 操作系统的功能和目标

1. **操作系统作为计算机系统资源的管理者**
   1. 处理机管理
   2. 存储器管理
   3. 文件管理
   4. 设备管理



2. **操作系统作为用户与计算机硬件系统之间的接口**
   1. **命令接口**
      1. **联机命令接口**：也称**交互式命令接口**，适用于分时或实时系统的接口（说一句话，做一件事）
      2. **脱机命令接口**：也称**批处理命令接口**，适用于批处理系统（说一堆话，做一堆事）
   2. **程序接口**
      1. 由一组**系统调用**（也称**广义指令**）组成。用户在程序中使用这些系统调用来请求操作系统为其提供服务
      2. 图形接口不是操作系统的一部分，但图形接口所调用的系统调用命令是操作系统的一部分

3. **操作系统实现了对计算机资源的扩充**
   1. 我们通常将覆盖了软件的机器称为**扩充机器**或**虚拟机**
   2. 没有任何软件支持的计算机称为裸机

### 1.3 操作系统的特征

1. **并发**：两个或多个事件在同一时间间隔内发生。注意区分并发和并行[^1]
2. **共享**：指系统中的资源可供内存中多个并发执行的进程共同使用
	1. **互斥共享**：一段时间内只允许一个进程访问
	2. **同时访问**：宏观上“同时”，微观上可能是交替的对该资源进行访问，即“分时共享”
3. **虚拟**：将一个物理上的实体变为若干逻辑上的对应物。实现虚拟的技术称为<mark>虚拟技术</mark>
	1. **时分复用技术**：如虚拟处理器。将物理资源（如CPU）的使用时间划分为多个时间片（Time Slice），供多个用户或进程轮流使用。让每个进程误以为自己独占CPU资源，而实际是分时共享。
	2. **空分复用技术**：如虚拟存储器。将物理资源（如内存或磁盘）划分为独立区域，分配给不同进程使用。为每个进程提供连续且独立的地址空间，隐藏物理内存的碎片化和容量限制。
4. **异步**：多道程序环境允许多个程序并发执行，但由于资源有限，进程的执行并不是一贯到底的，而是走走停停的，他以不可预知的速度向前推进，这就是进程的异步性

并发和共享是操作系统两个<mark>最基本</mark>的特征，两者之间互为存在的条件



## 2 操作系统发展历程

### 2.1 手工操作阶段


* 此阶段无操作系统
* 两个突出的缺点：
	1. 用户独占全机，资源利用率低
	2. CPU等待手工操作，CPU的利用不充分

### 2.2 批处理阶段

* 操作系统开始出现

#### 1. 单道批处理系统

**主要特征**：
1. **自动性**：在顺利的情况下，磁带上的一批作业能自动的逐个运行，而无须人工干预
2. **顺序性**：磁带上的各道作业顺序地进入内存，先调入内存的先完成
3. **单道性**：内存中仅有一道程序运行

#### 2. 多道批处理系统

**主要特征**：
1. **多道**
2. **宏观上并行**
3. **微观上串行**

**优点**：
1. **资源利用率高**，多道程序共享计算机资源，从而使各种资源得到充分的利用
2. **系统吞吐量大**，CPU和其他资源保持“忙碌”状态

**缺点**：
1. 用户时间响应较长
2. 不提供人机交互能力
3. 用户既不能了解自己的程序的运行情况，又不能控制计算机


### 2.3 分时操作系统

所谓<mark>分时技术</mark>，是指将处理器的运行时间分成很短的时间片，按时间片轮流将处理器分配给各联机作业使用

分时系统的主要特点：
1. **同时性**。同时性也称<mark>多路性</mark>，指允许多个终端用户同时使用一台计算机
2. **交互性**。用户使用终端采用人机对话的方式直接控制程序运行，与同程序进行交互
3. **独立性**。系统中多个用户独立的进行操作，互不干扰
4. **及时性**。用户请求能在很短时间内获得响应

### 2.4 实时操作系统

为了能在某个时间限制内完成某些紧急任务而不需要时间片排队，诞生了实时操作系统

1. **硬实时系统**：某个动作必须绝对地在规定的时刻发生
1. **软实时系统**：能够接受偶尔违反时间规定且不会引起任何永久性的损害



### 2.5 网络操作系统和分布式计算机系统

* **网络操作系统**把网络中的各台计算机有机地结合起来，实现各台计算机之间的通信和数据传输等功能，实现网络中各种资源的共享
* **分布式计算机系统**由多台计算机组成，并满足以下条件
  * 系统中任意两台计算机通过通信方式交换信息
  * 每台计算机都具有同等的地位
  * 每台计算机上的资源为所有用户共享
  * 系统中的任意台计算机都可以构成一个子系统，并且能够重构
  * 任何有工作都可以分布在几台计算机上，由它们并行工作、协同完成                
  * **特点**：分布性和并行性



### 2.6 个人计算机操作系统

如Windows、Linux和MacOS



## 3. 操作系统的运行环境

### 3.1 处理器运行模式

> 计算机“指令”和高级语言“代码”是两码事。CPU看不懂高级语言程序的含义，需要将它们“翻译”成CPU能懂的机器语言，即一条条“指令”

计算机系统中，通常CPU执行两种程序

1. 操作系统内核程序
2. 用户自编程序

前者是后者的管理者，要执行一些<mark>特权指令</mark>。后者出于安全考虑不能执行这些特权指令

1. **特权指令**，指不允许用户直接使用的指令
2. **非特权指令**，指允许用户直接使用的指令 



1. CPU的运行模式分为<mark>用户态（目态）</mark>和<mark>内核态（管态、核心态）</mark>。
2. 应用程序运行在用户态，操作系统内核程序运行在内核态



**内核**是计算机上配置的底层软件，管理着系统的各种资源。大多数操作系统的内核包括以下4个内容

1. **时钟管理**
   1. 计时
   2. 通过时钟中断，实现进程的切换
2. **中断机制**
3. **原语**
4. **系统控制的数据结构及处理**
